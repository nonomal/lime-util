<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>测试页面</title>
    <style></style>
  </head>
  <body></body>
  <script src="../dist/lime-util.js"></script>
  <script>
    function getIdCardInfo(idCard) {
      let info = {};
      // 省份
      const area = {
        11: "北京",
        12: "天津",
        13: "河北",
        14: "山西",
        15: "内蒙古",
        21: "辽宁",
        22: "吉林",
        23: "黑龙江",
        31: "上海",
        32: "江苏",
        33: "浙江",
        34: "安徽",
        35: "福建",
        36: "江西",
        37: "山东",
        41: "河南",
        42: "湖北",
        43: "湖南",
        44: "广东",
        45: "广西",
        46: "海南",
        50: "重庆",
        51: "四川",
        52: "贵州",
        53: "云南",
        54: "西藏",
        61: "陕西",
        62: "甘肃",
        63: "青海",
        64: "宁夏",
        65: "新疆",
        71: "台湾",
        81: "香港",
        82: "澳门",
        91: "国外",
      };
      info.province = area[idCard.substring(0, 2)];

      // 15位身份证
      if (idCard.length == 15) {
        // 生日
        // 年龄
        // 性别
      }
      // 18位身份证
      if (idCard.length == 18) {
        // 生日
        let birthday = idCard.substring(6, 14);
        // 年龄

        // 性别
      }

      return info;
    }

    function getAge(dateStr) {
      let age = 0;
      let dateArray = dateStr.split("-");
      let birthYear = Number(dateArray[0]),
        birthMonth = Number(dateArray[1]),
        birthDay = Number(dateArray[2]);
      // 当前的日期
      let nowDate = new Date();
      let nowYear = nowDate.getFullYear(),
        nowMonth = nowDate.getMonth() + 1,
        nowDay = nowDate.getDate();

      // 出生年份需要小于当年，否则是0岁
      let diffAge = nowYear - birthYear;
      if (diffAge > 0) {
        if (nowMonth == birthMonth) {
          if (nowDay - birthDay < 0) {
            age = diffAge - 1;
          } else {
            age = diffAge;
          }
        } else {
          if (nowMonth - birthMonth < 0) {
            age = diffAge - 1;
          } else {
            age = diffAge;
          }
        }
      }

      return age;
    }

    console.log(getAge("1991-12-10"));
  </script>
</html>
